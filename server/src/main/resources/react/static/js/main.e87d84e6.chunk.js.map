{"version":3,"sources":["context/NavbarContext.tsx","context/DarkTheme.tsx","components/TemporaryDrawer.tsx","components/NavBar.tsx","util/language.tsx","components/ExtensionLangSelect.tsx","util/localStorage.tsx","util/useLocalStorage.tsx","components/SourceCard.tsx","util/client.tsx","screens/Sources.tsx","components/ExtensionCard.tsx","screens/Extensions.tsx","components/MangaCard.tsx","components/MangaGrid.tsx","screens/SourceMangas.tsx","components/ChapterCard.tsx","components/CategorySelect.tsx","components/MangaDetails.tsx","components/LoadingPlaceholder.tsx","screens/Manga.tsx","components/Page.tsx","components/ReaderNavBar.tsx","screens/Reader.tsx","screens/SearchSingle.tsx","screens/Library.tsx","screens/Settings.tsx","screens/settings/Categories.jsx","App.tsx","index.tsx"],"names":["NavBarContext","React","createContext","title","setTitle","action","setAction","override","status","value","setOverride","DarkTheme","darkTheme","setDarkTheme","useStyles","makeStyles","list","width","TemporaryDrawer","drawerOpen","setDrawerOpen","classes","Drawer","open","anchor","onClose","className","role","onClick","onKeyDown","List","to","style","color","textDecoration","ListItem","button","ListItemIcon","ListItemText","primary","theme","root","flexGrow","menuButton","marginRight","spacing","NavBar","useState","useContext","AppBar","position","Toolbar","IconButton","edge","aria-label","disableRipple","Typography","variant","ISOLanguages","code","name","nativeName","langCodeToName","whereToCut","indexOf","length","proccessedCode","toLocaleLowerCase","substring","result","i","langSortCmp","a","b","aLang","bLang","createStyles","paper","maxHeight","ExtensionLangSelect","props","shownLangs","setShownLangs","allLangs","mShownLangs","setMShownLangs","setOpen","Dialog","maxWidth","DialogTitle","DialogContent","dividers","padding","map","lang","ListItemSecondaryAction","Switch","checked","onChange","e","event","target","clone","JSON","parse","stringify","splice","handleChange","DialogActions","Button","autoFocus","getItem","key","defaultValue","item","window","localStorage","setItem","useLocalStorage","initialState","Function","storage","storedValue","setStoredValue","valueToStore","display","justifyContent","alignItems","bullet","margin","transform","fontSize","pos","marginBottom","icon","height","flex","SourceCard","source","id","iconUrl","supportsLatest","serverAddress","Card","CardContent","Avatar","alt","src","flexDirection","component","gutterBottom","marginLeft","location","href","inferredPort","hostname","port","protocol","client","axios","create","baseURL","interceptors","request","use","config","data","FormData","Object","assign","headers","sourceToLangList","sources","forEach","push","sort","groupByLang","undefined","Sources","NavbarContext","setSources","fetched","setFetched","useEffect","get","then","response","entries","Fragment","ExtensionCard","extension","versionName","installed","hasUpdate","obsolete","pkgName","notifyInstall","installedState","setInstalledState","langPress","toUpperCase","uninstall","handleButtonClick","setTimeout","reload","Extensions","extensionsRaw","setExtensionsRaw","extensions","setExtensions","updateTriggerHolder","setUpdateTriggerHolder","groupedExtension","apkName","groupExtensions","groupsToShow","it","wrapper","gradient","top","background","opacity","bottom","image","MangaCard","forwardRef","ref","manga","thumbnailUrl","Grid","xs","sm","md","lg","CardActionArea","CardMedia","MangaGrid","mapped","mangas","message","hasNextPage","lastPageNum","setLastPageNum","lastManga","useRef","scrollHandler","current","rect","getBoundingClientRect","y","innerHeight","addEventListener","removeEventListener","idx","container","SourceMangas","sourceId","useParams","setMangas","setHasNextPage","sourceType","popular","mangaList","defaultProps","ChapterCard","chapter","useHistory","dateStr","date_upload","Date","toISOString","slice","chapter_number","scanlator","mangaId","chapterIndex","CategorySelect","categoryInfos","setCategoryInfos","tmpCategoryInfos","category","selected","order","categoryId","delete","FormGroup","categoryInfo","FormControlLabel","control","Checkbox","label","getValueOrUnknown","val","MangaDetails","inLibrary","setInLibrary","categoryDialogOpen","setCategoryDialogOpen","breakpoints","up","left","alignSelf","overflowY","leftRight","leftSide","borderRadius","minWidth","rightSide","fontWeight","buttons","paddingLeft","paddingRight","description","marginTop","textAlign","textJustify","genre","flexWrap","border","author","artist","toLocaleUpperCase","url","split","g","loading","LoadingPlaceholder","children","shouldRender","componentProps","createElement","CircularProgress","thickness","chapters","listStyle","Manga","setManga","setChapters","chapterCards","settings","loadingImage","staticNav","backgroundColor","continuesPageGap","LazyImage","index","setCurPage","imageSrc","setImagsrc","handleScroll","img","Image","onload","Page","offset","placeholder","once","defaultReaderSettings","showPageNumber","ReaderNavBar","history","setSettings","curPage","drawerVisible","setDrawerVisible","hideOpenButton","setHideOpenButton","prevScrollPos","setPrevScrollPos","settingsCollapseOpen","setSettingsCollapseOpen","useTheme","AppMainContainer","AppRootElment","minHeight","transition","flexShrink","navigation","gridTemplateColumns","gridTemplateAreas","gridColumnGap","textTransform","navigationChapters","settingsCollapsseHeader","openDrawerButton","setSettingValue","currentScrollPos","pageYOffset","Math","abs","rootEl","document","querySelector","mainContainer","classList","add","remove","ClickAwayListener","onClickAway","Slide","direction","in","timeout","appear","mountOnEnter","unmountOnExit","onEntered","onExited","ContainerComponent","disableFocusRipple","Collapse","pageCount","gridArea","startIcon","chapterCount","endIcon","Zoom","Fade","initialChapter","Reader","n","reader","pageNumber","right","setChapter","Array","from","TextField","SearchSingle","error","setError","setMessage","searchTerm","setSearchTerm","textInput","createRef","processInput","mangaGrid","inputRef","TabPanel","hidden","Library","toRender","tabs","setTabs","tabNum","setTabNum","Promise","all","libraryMangas","categoryTabs","isFetched","isLanding","tab","tabsClone","tabDefines","Tab","tabBodies","scrollableTabs","innerWidth","Tabs","newTab","handleTabChange","indicatorColor","textColor","centered","scrollButtons","ListItemLink","Settings","setServerAddress","dialogOpen","setDialogOpen","dialogValue","setDialogValue","handleDialogCancel","secondary","DialogContentText","type","fullWidth","Categories","categories","setCategories","categoryToEdit","setCategoryToEdit","triggerUpdate","handleDialogOpen","onDragEnd","destination","formData","append","post","finally","removed","categoryReorder","droppableId","provided","innerRef","draggableId","toString","snapshot","ContainerProps","draggableProps","dragHandleProps","isDragging","draggableStyle","palette","deleteCategory","Fab","patch","App","navBarContext","darkThemeContext","useMemo","createMuiTheme","overrides","MuiCssBaseline","ThemeProvider","Provider","CssBaseline","Container","disableGutters","paddingTop","path","exact","render","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.e87d84e6.chunk.js","sourcesContent":["/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\n\ntype ContextType = {\n    title: string\n    setTitle: React.Dispatch<React.SetStateAction<string>>\n    action: any\n    setAction: React.Dispatch<React.SetStateAction<any>>\n    override: INavbarOverride\n    setOverride: React.Dispatch<React.SetStateAction<INavbarOverride>>\n};\n\nconst NavBarContext = React.createContext<ContextType>({\n    title: 'Tachidesk',\n    setTitle: ():void => {},\n    action: <div />,\n    setAction: ():void => {},\n    override: { status: false, value: <div /> },\n    setOverride: ():void => {},\n});\n\nexport default NavBarContext;\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\n\ntype ContextType = {\n    darkTheme: boolean\n    setDarkTheme: React.Dispatch<React.SetStateAction<boolean>>\n};\n\nconst DarkTheme = React.createContext<ContextType>({\n    darkTheme: true,\n    setDarkTheme: ():void => {},\n});\n\nexport default DarkTheme;\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport InboxIcon from '@material-ui/icons/MoveToInbox';\nimport { Link } from 'react-router-dom';\n\nconst useStyles = makeStyles({\n    list: {\n        width: 250,\n    },\n});\n\ninterface IProps {\n    drawerOpen: boolean\n\n    setDrawerOpen(state: boolean): void\n}\n\nexport default function TemporaryDrawer({ drawerOpen, setDrawerOpen }: IProps) {\n    const classes = useStyles();\n\n    return (\n        <div>\n            <Drawer\n                open={drawerOpen}\n                anchor=\"left\"\n                onClose={() => setDrawerOpen(false)}\n            >\n                <div\n                    className={classes.list}\n                    role=\"presentation\"\n                    onClick={() => setDrawerOpen(false)}\n                    onKeyDown={() => setDrawerOpen(false)}\n                >\n                    <List>\n                        <Link to=\"/library\" style={{ color: 'inherit', textDecoration: 'none' }}>\n                            <ListItem button key=\"Library\">\n                                <ListItemIcon>\n                                    <InboxIcon />\n                                </ListItemIcon>\n                                <ListItemText primary=\"Library\" />\n                            </ListItem>\n                        </Link>\n                        <Link to=\"/extensions\" style={{ color: 'inherit', textDecoration: 'none' }}>\n                            <ListItem button key=\"Extensions\">\n                                <ListItemIcon>\n                                    <InboxIcon />\n                                </ListItemIcon>\n                                <ListItemText primary=\"Extensions\" />\n                            </ListItem>\n                        </Link>\n                        <Link to=\"/sources\" style={{ color: 'inherit', textDecoration: 'none' }}>\n                            <ListItem button key=\"Sources\">\n                                <ListItemIcon>\n                                    <InboxIcon />\n                                </ListItemIcon>\n                                <ListItemText primary=\"Sources\" />\n                            </ListItem>\n                        </Link>\n                        <Link to=\"/settings\" style={{ color: 'inherit', textDecoration: 'none' }}>\n                            <ListItem button key=\"settings\">\n                                <ListItemIcon>\n                                    <InboxIcon />\n                                </ListItemIcon>\n                                <ListItemText primary=\"Settings\" />\n                            </ListItem>\n                        </Link>\n                    </List>\n                </div>\n            </Drawer>\n        </div>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useContext, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport NavBarContext from '../context/NavbarContext';\nimport DarkTheme from '../context/DarkTheme';\nimport TemporaryDrawer from './TemporaryDrawer';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        flexGrow: 1,\n    },\n    menuButton: {\n        marginRight: theme.spacing(2),\n    },\n    title: {\n        flexGrow: 1,\n    },\n}));\n\nexport default function NavBar() {\n    const classes = useStyles();\n    const [drawerOpen, setDrawerOpen] = useState(false);\n    const { title, action, override } = useContext(NavBarContext);\n\n    const { darkTheme } = useContext(DarkTheme);\n\n    return (\n        <>\n            {override.status && override.value}\n            {!override.status\n        && (\n            <div className={classes.root}>\n                <AppBar position=\"fixed\" color={darkTheme ? 'default' : 'primary'}>\n                    <Toolbar>\n                        <IconButton\n                            edge=\"start\"\n                            className={classes.menuButton}\n                            color=\"inherit\"\n                            aria-label=\"menu\"\n                            disableRipple\n                            onClick={() => setDrawerOpen(true)}\n                        >\n                            <MenuIcon />\n                        </IconButton>\n                        <Typography variant=\"h6\" className={classes.title}>\n                            {title}\n                        </Typography>\n                        {action}\n                    </Toolbar>\n                </AppBar>\n                <TemporaryDrawer drawerOpen={drawerOpen} setDrawerOpen={setDrawerOpen} />\n            </div>\n        )}\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nexport const ISOLanguages = [\n    { code: 'all', name: 'All', nativeName: 'All' },\n    { code: 'installed', name: 'Installed', nativeName: 'Installed' },\n    { code: 'updates pending', name: 'Updates pending', nativeName: 'Updates pending' },\n\n    // full list: https://github.com/meikidd/iso-639-1/blob/master/src/data.js\n    { code: 'en', name: 'English', nativeName: 'English' },\n    { code: 'ca', name: 'Catalan; Valencian', nativeName: 'Català' },\n    { code: 'de', name: 'German', nativeName: 'Deutsch' },\n    { code: 'es', name: 'Spanish; Castilian', nativeName: 'Español' },\n    { code: 'fr', name: 'French', nativeName: 'Français' },\n    { code: 'id', name: 'Indonesian', nativeName: 'Indonesia' },\n    { code: 'it', name: 'Italian', nativeName: 'Italiano' },\n    { code: 'pt', name: 'Portuguese', nativeName: 'Português' },\n    { code: 'vi', name: 'Vietnamese', nativeName: 'Tiếng Việt' },\n    { code: 'tr', name: 'Turkish', nativeName: 'Türkçe' },\n    { code: 'ru', name: 'Russian', nativeName: 'русский' },\n    { code: 'ar', name: 'Arabic', nativeName: 'العربية' },\n    { code: 'hi', name: 'Hindi', nativeName: 'हिन्दी' },\n    { code: 'th', name: 'Thai', nativeName: 'ไทย' },\n    { code: 'zh', name: 'Chinese', nativeName: '中文' },\n    { code: 'ja', name: 'Japanese', nativeName: '日本語' },\n    { code: 'ko', name: 'Korean', nativeName: '한국어' },\n    { code: 'zu', name: 'Zulu', nativeName: 'isiZulu' },\n    { code: 'xh', name: 'Xhosa', nativeName: 'isiXhosa' },\n    { code: 'uk', name: 'Ukrainian', nativeName: 'Українська' },\n    { code: 'ro', name: 'Romanian', nativeName: 'Română' },\n    { code: 'bg', name: 'Bulgarian', nativeName: 'български' },\n    { code: 'cs', name: 'Czech', nativeName: 'čeština' },\n    { code: 'pl', name: 'Polish', nativeName: 'polski' },\n    { code: 'no', name: 'Norwegian', nativeName: 'Norsk' },\n    { code: 'nl', name: 'Dutch', nativeName: 'Nederlands' },\n    { code: 'my', name: 'Burmese', nativeName: 'ဗမာစာ' },\n    { code: 'ms', name: 'Malay', nativeName: 'Malaysia' },\n    { code: 'mn', name: 'Mongolian', nativeName: 'Монгол' },\n    { code: 'ml', name: 'Malayalam', nativeName: 'മലയാളം' },\n    { code: 'ku', name: 'Kurdish', nativeName: 'Kurdî' },\n    { code: 'hu', name: 'Hungarian', nativeName: 'Magyar' },\n    { code: 'hr', name: 'Croatian', nativeName: 'Hrvatski' },\n    { code: 'he', name: 'Hebrew', nativeName: 'עברית' },\n    { code: 'fil', name: 'Filipino', nativeName: 'Filipino' },\n    { code: 'fi', name: 'Finnish', nativeName: 'suomi' },\n    { code: 'fa', name: 'Persian', nativeName: 'فارسی' },\n    { code: 'eu', name: 'Basque', nativeName: 'euskara' },\n    { code: 'el', name: 'Greek', nativeName: 'Ελληνικά' },\n    { code: 'da', name: 'Danish', nativeName: 'dansk' },\n];\n\nexport function langCodeToName(code: string): string {\n    const whereToCut = code.indexOf('-') !== -1 ? code.indexOf('-') : code.length;\n\n    const proccessedCode = code.toLocaleLowerCase().substring(0, whereToCut);\n    let result = 'Error';\n\n    for (let i = 0; i < ISOLanguages.length; i++) {\n        if (ISOLanguages[i].code === proccessedCode) result = ISOLanguages[i].nativeName;\n    }\n\n    if (code.indexOf('-') !== -1) {\n        result = `${result} (${code.substring(whereToCut + 1)})`;\n    }\n\n    return result;\n}\n\nexport function defualtLangs() {\n    return [\n        // todo: infer this from the browser\n        'en',\n    ];\n}\n\nexport const langSortCmp = (a: string, b: string) => {\n    // puts english first for convience\n    const aLang = langCodeToName(a);\n    const bLang = langCodeToName(b);\n\n    if (a === 'en') return -1;\n    if (b === 'en') return 1;\n    return aLang > bLang ? 1 : -1;\n};\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useState } from 'react';\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Dialog from '@material-ui/core/Dialog';\nimport Switch from '@material-ui/core/Switch';\nimport IconButton from '@material-ui/core/IconButton';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport { List, ListItemSecondaryAction, ListItemText } from '@material-ui/core';\nimport ListItem from '@material-ui/core/ListItem';\nimport { langCodeToName } from '../util/language';\n\nconst useStyles = makeStyles(() => createStyles({\n    paper: {\n        maxHeight: 435,\n        width: '80%',\n    },\n}));\n\ninterface IProps {\n    shownLangs: string[]\n    setShownLangs: (arg0: string[]) => void\n    allLangs: string[]\n}\n\nexport default function ExtensionLangSelect(props: IProps) {\n    const { shownLangs, setShownLangs, allLangs } = props;\n    // hold a copy and only sate state on parent when OK pressed, improves performance\n    const [mShownLangs, setMShownLangs] = useState(shownLangs);\n    const classes = useStyles();\n    const [open, setOpen] = useState<boolean>(false);\n\n    const handleCancel = () => {\n        setOpen(false);\n    };\n\n    const handleOk = () => {\n        setOpen(false);\n        setShownLangs(mShownLangs);\n    };\n\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>, lang: string) => {\n        const { checked } = event.target as HTMLInputElement;\n\n        if (checked) {\n            setMShownLangs([...mShownLangs, lang]);\n        } else {\n            const clone = JSON.parse(JSON.stringify(mShownLangs));\n            clone.splice(clone.indexOf(lang), 1);\n            setMShownLangs(clone);\n        }\n    };\n\n    return (\n        <>\n            <IconButton\n                onClick={() => setOpen(true)}\n                aria-label=\"display more actions\"\n                edge=\"end\"\n                color=\"inherit\"\n            >\n                <FilterListIcon />\n            </IconButton>\n            <Dialog\n                classes={classes}\n                maxWidth=\"xs\"\n                open={open}\n            >\n                <DialogTitle>Enabled Languages</DialogTitle>\n                <DialogContent dividers style={{ padding: 0 }}>\n                    <List>\n                        {allLangs.map((lang) => (\n                            <ListItem key={lang}>\n                                <ListItemText primary={langCodeToName(lang)} />\n\n                                <ListItemSecondaryAction>\n                                    <Switch\n                                        checked={mShownLangs.indexOf(lang) !== -1}\n                                        onChange={(e) => handleChange(e, lang)}\n                                    />\n                                </ListItemSecondaryAction>\n\n                            </ListItem>\n                        ))}\n                    </List>\n\n                </DialogContent>\n                <DialogActions>\n                    <Button autoFocus onClick={handleCancel} color=\"primary\">\n                        Cancel\n                    </Button>\n                    <Button onClick={handleOk} color=\"primary\">\n                        Ok\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nfunction getItem<T>(key: string, defaultValue: T) : T {\n    try {\n        const item = window.localStorage.getItem(key);\n\n        if (item !== null) {\n            return JSON.parse(item);\n        }\n\n        window.localStorage.setItem(key, JSON.stringify(defaultValue));\n\n        /* eslint-disable no-empty */\n    } finally { }\n    return defaultValue;\n}\n\nfunction setItem<T>(key: string, value: T): void {\n    try {\n        window.localStorage.setItem(key, JSON.stringify(value));\n\n        // eslint-disable-next-line no-empty\n    } finally { }\n}\n\nexport default { getItem, setItem };\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useState, Dispatch, SetStateAction } from 'react';\nimport storage from './localStorage';\n\n// eslint-disable-next-line max-len\nexport default function useLocalStorage<T>(key: string, defaultValue: T | (() => T)) : [T, Dispatch<SetStateAction<T>>] {\n    const initialState = defaultValue instanceof Function ? defaultValue() : defaultValue;\n    const [storedValue, setStoredValue] = useState<T>(storage.getItem(key, initialState));\n\n    const setValue = ((value: T | ((prevState: T) => T)) => {\n        // Allow value to be a function so we have same API as useState\n        const valueToStore = value instanceof Function ? value(storedValue) : value;\n        setStoredValue(valueToStore);\n        storage.setItem(key, valueToStore);\n    }) as React.Dispatch<React.SetStateAction<T>>;\n\n    return [storedValue, setValue];\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport useLocalStorage from '../util/useLocalStorage';\nimport { langCodeToName } from '../util/language';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: 16,\n    },\n    bullet: {\n        display: 'inline-block',\n        margin: '0 2px',\n        transform: 'scale(0.8)',\n    },\n    title: {\n        fontSize: 14,\n    },\n    pos: {\n        marginBottom: 12,\n    },\n    icon: {\n        width: theme.spacing(7),\n        height: theme.spacing(7),\n        flex: '0 0 auto',\n        marginRight: 16,\n    },\n}));\n\ninterface IProps {\n    source: ISource\n}\n\nexport default function SourceCard(props: IProps) {\n    const {\n        source: {\n            id, name, lang, iconUrl, supportsLatest,\n        },\n    } = props;\n\n    const [serverAddress] = useLocalStorage<String>('serverBaseURL', '');\n\n    const classes = useStyles();\n\n    return (\n        <Card>\n            <CardContent className={classes.root}>\n                <div style={{ display: 'flex' }}>\n                    <Avatar\n                        variant=\"rounded\"\n                        className={classes.icon}\n                        alt={name}\n                        src={serverAddress + iconUrl}\n                    />\n                    <div style={{ display: 'flex', flexDirection: 'column' }}>\n                        <Typography variant=\"h5\" component=\"h2\">\n                            {name}\n                        </Typography>\n                        <Typography variant=\"caption\" display=\"block\" gutterBottom>\n                            {langCodeToName(lang)}\n                        </Typography>\n                    </div>\n                </div>\n                <div style={{ display: 'flex' }}>\n                    <Button variant=\"outlined\" style={{ marginLeft: 20 }} onClick={() => { window.location.href = `/sources/${id}/search/`; }}>Search</Button>\n                    {supportsLatest && <Button variant=\"outlined\" style={{ marginLeft: 20 }} onClick={() => { window.location.href = `/sources/${id}/latest/`; }}>Latest</Button>}\n                    <Button variant=\"outlined\" style={{ marginLeft: 20 }} onClick={() => { window.location.href = `/sources/${id}/popular/`; }}>Browse</Button>\n                </div>\n            </CardContent>\n        </Card>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport axios from 'axios';\nimport storage from './localStorage';\n\nconst { hostname, port, protocol } = window.location;\n\n// if port is 3000 it's probably running from webpack devlopment server\nlet inferredPort;\nif (port === '3000') { inferredPort = '4567'; } else { inferredPort = port; }\n\nconst client = axios.create({\n    // baseURL must not have traling slash\n    baseURL: storage.getItem('serverBaseURL', `${protocol}//${hostname}:${inferredPort}`),\n});\n\nclient.interceptors.request.use((config) => {\n    if (config.data instanceof FormData) {\n        Object.assign(config.headers, { 'Content-Type': 'multipart/form-data' });\n    }\n    return config;\n});\n\nexport default client;\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport ExtensionLangSelect from '../components/ExtensionLangSelect';\nimport SourceCard from '../components/SourceCard';\nimport NavbarContext from '../context/NavbarContext';\nimport client from '../util/client';\nimport { defualtLangs, langCodeToName, langSortCmp } from '../util/language';\nimport useLocalStorage from '../util/useLocalStorage';\n\nfunction sourceToLangList(sources: ISource[]) {\n    const result: string[] = [];\n\n    sources.forEach((source) => {\n        if (result.indexOf(source.lang) === -1) { result.push(source.lang); }\n    });\n\n    result.sort(langSortCmp);\n    return result;\n}\n\nfunction groupByLang(sources: ISource[]) {\n    const result = {} as any;\n    sources.forEach((source) => {\n        if (result[source.lang] === undefined) { result[source.lang] = [] as ISource[]; }\n        result[source.lang].push(source);\n    });\n\n    return result;\n}\n\nexport default function Sources() {\n    const { setTitle, setAction } = useContext(NavbarContext);\n\n    const [shownLangs, setShownLangs] = useLocalStorage<string[]>('shownSourceLangs', defualtLangs());\n\n    const [sources, setSources] = useState<ISource[]>([]);\n    const [fetched, setFetched] = useState<boolean>(false);\n\n    useEffect(() => {\n        setTitle('Sources');\n        setAction(\n            <ExtensionLangSelect\n                shownLangs={shownLangs}\n                setShownLangs={setShownLangs}\n                allLangs={sourceToLangList(sources)}\n            />,\n        );\n    }, [shownLangs, sources]);\n\n    useEffect(() => {\n        client.get('/api/v1/source/list')\n            .then((response) => response.data)\n            .then((data) => { setSources(data); setFetched(true); });\n    }, []);\n\n    if (sources.length === 0) {\n        if (fetched) return (<h3>No sources found. Install Some Extensions first.</h3>);\n        return (<h3>loading...</h3>);\n    }\n    return (\n        <>\n            {/* eslint-disable-next-line max-len */}\n            {Object.entries(groupByLang(sources)).sort((a, b) => langSortCmp(a[0], b[0])).map(([lang, list]) => (\n                shownLangs.indexOf(lang) !== -1 && (\n                    <React.Fragment key={lang}>\n                        <h1 key={lang} style={{ marginLeft: 25 }}>{langCodeToName(lang)}</h1>\n                        {(list as ISource[]).map((source) => (\n                            <SourceCard\n                                key={source.id}\n                                source={source}\n                            />\n                        ))}\n                    </React.Fragment>\n                )\n            ))}\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport client from '../util/client';\nimport useLocalStorage from '../util/useLocalStorage';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: 16,\n    },\n    bullet: {\n        display: 'inline-block',\n        margin: '0 2px',\n        transform: 'scale(0.8)',\n    },\n    title: {\n        fontSize: 14,\n    },\n    pos: {\n        marginBottom: 12,\n    },\n    icon: {\n        width: theme.spacing(7),\n        height: theme.spacing(7),\n        flex: '0 0 auto',\n        marginRight: 16,\n    },\n}));\n\ninterface IProps {\n    extension: IExtension\n    notifyInstall: () => void\n}\n\nexport default function ExtensionCard(props: IProps) {\n    const {\n        extension: {\n            name, lang, versionName, installed, hasUpdate, obsolete, pkgName, iconUrl,\n        },\n        notifyInstall,\n    } = props;\n    const [installedState, setInstalledState] = useState<string>(\n        () => {\n            if (obsolete) { return 'obsolete'; }\n            if (hasUpdate) { return 'update'; }\n            return (installed ? 'uninstall' : 'install');\n        },\n    );\n\n    const [serverAddress] = useLocalStorage<String>('serverBaseURL', '');\n\n    const classes = useStyles();\n    const langPress = lang === 'all' ? 'All' : lang.toUpperCase();\n\n    function install() {\n        setInstalledState('installing');\n        client.get(`/api/v1/extension/install/${pkgName}`)\n            .then(() => {\n                setInstalledState('uninstall');\n                notifyInstall();\n            });\n    }\n\n    function update() {\n        setInstalledState('updating');\n        client.get(`/api/v1/extension/update/${pkgName}`)\n            .then(() => {\n                setInstalledState('uninstall');\n                notifyInstall();\n            });\n    }\n\n    function uninstall() {\n        setInstalledState('uninstalling');\n        client.get(`/api/v1/extension/uninstall/${pkgName}`)\n            .then(() => {\n                // setInstalledState('install');\n                notifyInstall();\n            });\n    }\n\n    function handleButtonClick() {\n        switch (installedState) {\n            case 'install':\n                install();\n                break;\n            case 'update':\n                update();\n                break;\n            case 'obsolete':\n                uninstall();\n                setTimeout(() => window.location.reload(), 3000);\n                break;\n            case 'uninstall':\n                uninstall();\n                break;\n            default:\n                break;\n        }\n    }\n\n    return (\n        <Card>\n            <CardContent className={classes.root}>\n                <div style={{ display: 'flex' }}>\n                    <Avatar\n                        variant=\"rounded\"\n                        className={classes.icon}\n                        alt={name}\n                        src={serverAddress + iconUrl}\n                    />\n                    <div style={{ display: 'flex', flexDirection: 'column' }}>\n                        <Typography variant=\"h5\" component=\"h2\">\n                            {name}\n                        </Typography>\n                        <Typography variant=\"caption\" display=\"block\" gutterBottom>\n                            {langPress}\n                            {' '}\n                            {versionName}\n                        </Typography>\n                    </div>\n                </div>\n\n                <Button\n                    variant=\"outlined\"\n                    style={{ color: installedState === 'obsolete' ? 'red' : 'inherit' }}\n                    onClick={() => handleButtonClick()}\n                >\n                    {installedState}\n\n                </Button>\n            </CardContent>\n        </Card>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport ExtensionCard from '../components/ExtensionCard';\nimport NavbarContext from '../context/NavbarContext';\nimport client from '../util/client';\nimport useLocalStorage from '../util/useLocalStorage';\nimport ExtensionLangSelect from '../components/ExtensionLangSelect';\nimport { defualtLangs, langCodeToName, langSortCmp } from '../util/language';\n\nconst allLangs: string[] = [];\n\nfunction groupExtensions(extensions: IExtension[]) {\n    allLangs.length = 0; // empty the array\n    const result = { installed: [], 'updates pending': [] } as any;\n    extensions.sort((a, b) => ((a.apkName > b.apkName) ? 1 : -1));\n\n    extensions.forEach((extension) => {\n        if (result[extension.lang] === undefined) {\n            result[extension.lang] = [];\n            if (extension.lang !== 'all') { allLangs.push(extension.lang); }\n        }\n        if (extension.installed) {\n            if (extension.hasUpdate) {\n                result['updates pending'].push(extension);\n            } else {\n                result.installed.push(extension);\n            }\n        } else {\n            result[extension.lang].push(extension);\n        }\n    });\n\n    // put english first for convience\n    allLangs.sort(langSortCmp);\n\n    return result;\n}\n\nfunction extensionDefaultLangs() {\n    return [...defualtLangs(), 'all'];\n}\n\nexport default function Extensions() {\n    const { setTitle, setAction } = useContext(NavbarContext);\n    const [shownLangs, setShownLangs] = useLocalStorage<string[]>('shownExtensionLangs', extensionDefaultLangs());\n\n    useEffect(() => {\n        setTitle('Extensions');\n        setAction(\n            <ExtensionLangSelect\n                shownLangs={shownLangs}\n                setShownLangs={setShownLangs}\n                allLangs={allLangs}\n            />,\n        );\n    }, [shownLangs]);\n\n    const [extensionsRaw, setExtensionsRaw] = useState<IExtension[]>([]);\n    const [extensions, setExtensions] = useState<any>({});\n\n    const [updateTriggerHolder, setUpdateTriggerHolder] = useState(0); // just a hack\n    const triggerUpdate = () => setUpdateTriggerHolder(updateTriggerHolder + 1); // just a hack\n\n    useEffect(() => {\n        client.get('/api/v1/extension/list')\n            .then((response) => response.data)\n            .then((data) => setExtensionsRaw(data));\n    }, [updateTriggerHolder]);\n\n    useEffect(() => {\n        if (extensionsRaw.length > 0) {\n            const groupedExtension = groupExtensions(extensionsRaw);\n            setExtensions(groupedExtension);\n        }\n    }, [extensionsRaw]);\n\n    if (Object.entries(extensions).length === 0) {\n        return <h3>loading...</h3>;\n    }\n    const groupsToShow = ['updates pending', 'installed', ...shownLangs];\n    return (\n        <>\n            {\n                Object.entries(extensions).map(([lang, list]) => (\n                    ((groupsToShow.indexOf(lang) !== -1 && (list as []).length > 0)\n                        && (\n                            <React.Fragment key={lang}>\n                                <h1 key={lang} style={{ marginLeft: 25 }}>\n                                    {langCodeToName(lang)}\n                                </h1>\n                                {(list as IExtension[]).map((it) => (\n                                    <ExtensionCard\n                                        key={it.apkName}\n                                        extension={it}\n                                        notifyInstall={() => {\n                                            triggerUpdate();\n                                        }}\n                                    />\n                                ))}\n                            </React.Fragment>\n                        ))\n                ))\n            }\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Typography from '@material-ui/core/Typography';\nimport { Link } from 'react-router-dom';\nimport { Grid } from '@material-ui/core';\nimport useLocalStorage from '../util/useLocalStorage';\n\nconst useStyles = makeStyles({\n    root: {\n        height: '100%',\n        width: '100%',\n        display: 'flex',\n    },\n    wrapper: {\n        position: 'relative',\n        height: '100%',\n    },\n    gradient: {\n        position: 'absolute',\n        top: 0,\n        width: '100%',\n        height: '100%',\n        background: 'linear-gradient(to bottom, transparent, #000000)',\n        opacity: 0.5,\n    },\n    title: {\n        position: 'absolute',\n        bottom: 0,\n        padding: '0.5em',\n        color: 'white',\n    },\n    image: {\n        height: '100%',\n        width: '100%',\n    },\n});\n\ninterface IProps {\n    manga: IMangaCard\n}\nconst MangaCard = React.forwardRef((props: IProps, ref) => {\n    const {\n        manga: {\n            id, title, thumbnailUrl,\n        },\n    } = props;\n    const classes = useStyles();\n    const [serverAddress] = useLocalStorage<String>('serverBaseURL', '');\n\n    return (\n        <Grid item xs={6} sm={4} md={3} lg={2}>\n            <Link to={`/manga/${id}/`}>\n                <Card className={classes.root} ref={ref}>\n                    <CardActionArea>\n                        <div className={classes.wrapper}>\n                            <CardMedia\n                                className={classes.image}\n                                component=\"img\"\n                                alt={title}\n                                image={serverAddress + thumbnailUrl}\n                                title={title}\n                            />\n                            <div className={classes.gradient} />\n                            <Typography className={classes.title} variant=\"h5\" component=\"h2\">{title}</Typography>\n                        </div>\n                    </CardActionArea>\n                </Card>\n            </Link>\n        </Grid>\n    );\n});\n\nexport default MangaCard;\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useEffect, useRef } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport MangaCard from './MangaCard';\n\ninterface IProps{\n    mangas: IMangaCard[]\n    message?: string\n    hasNextPage: boolean\n    lastPageNum: number\n    setLastPageNum: (lastPageNum: number) => void\n}\n\nexport default function MangaGrid(props: IProps) {\n    const {\n        mangas, message, hasNextPage, lastPageNum, setLastPageNum,\n    } = props;\n    let mapped;\n    const lastManga = useRef<HTMLInputElement>();\n\n    const scrollHandler = () => {\n        if (lastManga.current) {\n            const rect = lastManga.current.getBoundingClientRect();\n            if (((rect.y + rect.height) / window.innerHeight < 2) && hasNextPage) {\n                setLastPageNum(lastPageNum + 1);\n            }\n        }\n    };\n    useEffect(() => {\n        window.addEventListener('scroll', scrollHandler, true);\n        return () => {\n            window.removeEventListener('scroll', scrollHandler, true);\n        };\n    }, [hasNextPage, mangas]);\n\n    if (mangas.length === 0) {\n        mapped = <h3>{message}</h3>;\n    } else {\n        mapped = mangas.map((it, idx) => {\n            if (idx === mangas.length - 1) {\n                return <MangaCard manga={it} ref={lastManga} />;\n            }\n            return <MangaCard manga={it} />;\n        });\n    }\n\n    return (\n        <Grid container spacing={1} style={{ margin: 0, width: '100%', padding: '5px' }}>\n            {mapped}\n        </Grid>\n    );\n}\n\nMangaGrid.defaultProps = {\n    message: 'loading...',\n};\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport MangaGrid from '../components/MangaGrid';\nimport NavbarContext from '../context/NavbarContext';\nimport client from '../util/client';\n\nexport default function SourceMangas(props: { popular: boolean }) {\n    const { setTitle, setAction } = useContext(NavbarContext);\n    useEffect(() => { setTitle('Source'); setAction(<></>); }, []);\n\n    const { sourceId } = useParams<{sourceId: string}>();\n    const [mangas, setMangas] = useState<IMangaCard[]>([]);\n    const [hasNextPage, setHasNextPage] = useState<boolean>(false);\n    const [lastPageNum, setLastPageNum] = useState<number>(1);\n\n    useEffect(() => {\n        client.get(`/api/v1/source/${sourceId}`)\n            .then((response) => response.data)\n            .then((data: { name: string }) => setTitle(data.name));\n    }, []);\n\n    useEffect(() => {\n        const sourceType = props.popular ? 'popular' : 'latest';\n        client.get(`/api/v1/source/${sourceId}/${sourceType}/${lastPageNum}`)\n            .then((response) => response.data)\n            .then((data: { mangaList: IManga[], hasNextPage: boolean }) => {\n                setMangas([\n                    ...mangas,\n                    ...data.mangaList.map((it) => ({\n                        title: it.title, thumbnailUrl: it.thumbnailUrl, id: it.id,\n                    }))]);\n                setHasNextPage(data.hasNextPage);\n            });\n    }, [lastPageNum]);\n\n    return (\n        <MangaGrid\n            mangas={mangas}\n            hasNextPage={hasNextPage}\n            lastPageNum={lastPageNum}\n            setLastPageNum={setLastPageNum}\n        />\n    );\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport { Link, useHistory } from 'react-router-dom';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center',\n        padding: 16,\n    },\n    bullet: {\n        display: 'inline-block',\n        margin: '0 2px',\n        transform: 'scale(0.8)',\n    },\n    title: {\n        fontSize: 14,\n    },\n    pos: {\n        marginBottom: 12,\n    },\n    icon: {\n        width: theme.spacing(7),\n        height: theme.spacing(7),\n        flex: '0 0 auto',\n        marginRight: 16,\n    },\n}));\n\ninterface IProps{\n    chapter: IChapter\n}\n\nexport default function ChapterCard(props: IProps) {\n    const classes = useStyles();\n    const history = useHistory();\n    const { chapter } = props;\n\n    const dateStr = chapter.date_upload && new Date(chapter.date_upload).toISOString().slice(0, 10);\n\n    return (\n        <>\n            <li>\n                <Card>\n                    <CardContent className={classes.root}>\n                        <div style={{ display: 'flex' }}>\n                            <div style={{ display: 'flex', flexDirection: 'column' }}>\n                                <Typography variant=\"h5\" component=\"h2\">\n                                    {chapter.name}\n                                    {chapter.chapter_number > 0 && ` : ${chapter.chapter_number}`}\n                                </Typography>\n                                <Typography variant=\"caption\" display=\"block\" gutterBottom>\n                                    {chapter.scanlator}\n                                    {chapter.scanlator && ' '}\n                                    {dateStr}\n                                </Typography>\n                            </div>\n                        </div>\n                        <Link\n                            to={`/manga/${chapter.mangaId}/chapter/${chapter.chapterIndex}`}\n                            style={{ textDecoration: 'none' }}\n                        >\n                            <Button\n                                variant=\"outlined\"\n                                style={{ marginLeft: 20 }}\n                            >\n                                open\n\n                            </Button>\n                        </Link>\n\n                    </CardContent>\n                </Card>\n            </li>\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useEffect, useState } from 'react';\nimport { makeStyles, createStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Dialog from '@material-ui/core/Dialog';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormGroup from '@material-ui/core/FormGroup';\nimport client from '../util/client';\n\nconst useStyles = makeStyles(() => createStyles({\n    paper: {\n        maxHeight: 435,\n        width: '80%',\n    },\n}));\n\ninterface IProps {\n    open: boolean\n    setOpen: (value: boolean) => void\n    mangaId: number\n}\n\ninterface ICategoryInfo {\n    category: ICategory\n    selected: boolean\n}\n\nexport default function CategorySelect(props: IProps) {\n    const classes = useStyles();\n    const { open, setOpen, mangaId } = props;\n    const [categoryInfos, setCategoryInfos] = useState<ICategoryInfo[]>([]);\n\n    const [updateTriggerHolder, setUpdateTriggerHolder] = useState(0); // just a hack\n    const triggerUpdate = () => setUpdateTriggerHolder(updateTriggerHolder + 1); // just a hack\n\n    useEffect(() => {\n        let tmpCategoryInfos: ICategoryInfo[] = [];\n        client.get('/api/v1/category/')\n            .then((response) => response.data)\n            .then((data: ICategory[]) => {\n                tmpCategoryInfos = data.map((category) => ({ category, selected: false }));\n            })\n            .then(() => {\n                client.get(`/api/v1/manga/${mangaId}/category/`)\n                    .then((response) => response.data)\n                    .then((data: ICategory[]) => {\n                        data.forEach((category) => {\n                            tmpCategoryInfos[category.order - 1].selected = true;\n                        });\n                        setCategoryInfos(tmpCategoryInfos);\n                    });\n            });\n    }, [updateTriggerHolder, open]);\n\n    const handleCancel = () => {\n        setOpen(false);\n    };\n\n    const handleOk = () => {\n        setOpen(false);\n    };\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const handleChange = (event: React.ChangeEvent<HTMLInputElement>, categoryId: number) => {\n        const { checked } = event.target as HTMLInputElement;\n\n        const method = checked ? client.get : client.delete;\n        method(`/api/v1/manga/${mangaId}/category/${categoryId}`)\n            .then(() => triggerUpdate());\n    };\n\n    return (\n        <Dialog\n            classes={classes}\n            maxWidth=\"xs\"\n            open={open}\n        >\n            <DialogTitle>Set categories</DialogTitle>\n            <DialogContent dividers>\n                <FormGroup>\n                    {categoryInfos.length === 0\n                        && (\n                            <span>\n                                No categories found!\n                                <br />\n                                You should make some from settings.\n                            </span>\n                        )}\n                    {categoryInfos.map((categoryInfo) => (\n                        <FormControlLabel\n                            control={(\n                                <Checkbox\n                                    checked={categoryInfo.selected}\n                                    onChange={(e) => handleChange(e, categoryInfo.category.id)}\n                                    color=\"default\"\n                                />\n                            )}\n                            label={categoryInfo.category.name}\n                        />\n                    ))}\n                </FormGroup>\n\n            </DialogContent>\n            <DialogActions>\n                <Button autoFocus onClick={handleCancel} color=\"primary\">\n                    Cancel\n                </Button>\n                <Button onClick={handleOk} color=\"primary\">\n                    Ok\n                </Button>\n            </DialogActions>\n        </Dialog>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport { makeStyles } from '@material-ui/core';\nimport IconButton from '@material-ui/core/IconButton';\nimport { Theme } from '@material-ui/core/styles';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\nimport FilterListIcon from '@material-ui/icons/FilterList';\nimport PublicIcon from '@material-ui/icons/Public';\nimport React, { useContext, useEffect, useState } from 'react';\nimport NavbarContext from '../context/NavbarContext';\nimport client from '../util/client';\nimport useLocalStorage from '../util/useLocalStorage';\nimport CategorySelect from './CategorySelect';\n\nconst useStyles = (inLibrary: string) => makeStyles((theme: Theme) => ({\n    root: {\n        width: '100%',\n        [theme.breakpoints.up('md')]: {\n            position: 'sticky',\n            top: '64px',\n            left: '0px',\n            width: '50vw',\n            height: 'calc(100vh - 64px)',\n            alignSelf: 'flex-start',\n            overflowY: 'auto',\n        },\n    },\n    top: {\n        padding: '10px',\n        // [theme.breakpoints.up('md')]: {\n        //     minWidth: '50%',\n        // },\n    },\n    leftRight: {\n        display: 'flex',\n    },\n    leftSide: {\n        '& img': {\n            borderRadius: 4,\n            maxWidth: '100%',\n            minWidth: '100%',\n            height: 'auto',\n        },\n        maxWidth: '50%',\n        // [theme.breakpoints.up('md')]: {\n        //     minWidth: '100px',\n        // },\n    },\n    rightSide: {\n        marginLeft: 15,\n        maxWidth: '100%',\n        '& span': {\n            fontWeight: '400',\n        },\n        [theme.breakpoints.up('lg')]: {\n            fontSize: '1.3em',\n        },\n    },\n    buttons: {\n        display: 'flex',\n        justifyContent: 'space-around',\n        '& button': {\n            color: inLibrary === 'In Library' ? '#2196f3' : 'inherit',\n        },\n        '& span': {\n            display: 'block',\n            fontSize: '0.85em',\n        },\n        '& a': {\n            textDecoration: 'none',\n            color: '#858585',\n            '& button': {\n                color: 'inherit',\n            },\n        },\n    },\n    bottom: {\n        paddingLeft: '10px',\n        paddingRight: '10px',\n        [theme.breakpoints.up('md')]: {\n            fontSize: '1.2em',\n            // maxWidth: '50%',\n        },\n        [theme.breakpoints.up('lg')]: {\n            fontSize: '1.3em',\n        },\n    },\n    description: {\n        '& h4': {\n            marginTop: '1em',\n            marginBottom: 0,\n        },\n        '& p': {\n            textAlign: 'justify',\n            textJustify: 'inter-word',\n        },\n    },\n    genre: {\n        display: 'flex',\n        flexWrap: 'wrap',\n        '& h5': {\n            border: '2px solid #2196f3',\n            borderRadius: '1.13em',\n            marginRight: '1em',\n            marginTop: 0,\n            marginBottom: '10px',\n            padding: '0.3em',\n            color: '#2196f3',\n        },\n    },\n}));\n\ninterface IProps{\n    manga: IManga\n}\n\nfunction getSourceName(source: ISource) {\n    if (source.name !== null) {\n        return `${source.name} (${source.lang.toLocaleUpperCase()})`;\n    }\n    return source.id;\n}\n\nfunction getValueOrUnknown(val: string) {\n    return val || 'UNKNOWN';\n}\n\nexport default function MangaDetails(props: IProps) {\n    const { setAction } = useContext(NavbarContext);\n\n    const { manga } = props;\n    const [inLibrary, setInLibrary] = useState<string>(\n        manga.inLibrary ? 'In Library' : 'Add To Library',\n    );\n\n    const [categoryDialogOpen, setCategoryDialogOpen] = useState<boolean>(false);\n\n    useEffect(() => {\n        if (inLibrary === 'In Library') {\n            setAction(\n                <>\n                    <IconButton\n                        onClick={() => setCategoryDialogOpen(true)}\n                        aria-label=\"display more actions\"\n                        edge=\"end\"\n                        color=\"inherit\"\n                    >\n                        <FilterListIcon />\n                    </IconButton>\n                    <CategorySelect\n                        open={categoryDialogOpen}\n                        setOpen={setCategoryDialogOpen}\n                        mangaId={manga.id}\n                    />\n                </>,\n\n            );\n        } else { setAction(<></>); }\n    }, [inLibrary, categoryDialogOpen]);\n\n    const [serverAddress] = useLocalStorage<String>('serverBaseURL', '');\n\n    const classes = useStyles(inLibrary)();\n\n    function addToLibrary() {\n        // setInLibrary('adding');\n        client.get(`/api/v1/manga/${manga.id}/library/`).then(() => {\n            setInLibrary('In Library');\n        });\n    }\n\n    function removeFromLibrary() {\n        // setInLibrary('removing');\n        client.delete(`/api/v1/manga/${manga.id}/library/`).then(() => {\n            setInLibrary('Add To Library');\n        });\n    }\n\n    function handleButtonClick() {\n        if (inLibrary === 'Add To Library') {\n            addToLibrary();\n        } else {\n            removeFromLibrary();\n        }\n    }\n\n    return (\n        <div className={classes.root}>\n            <div className={classes.top}>\n                <div className={classes.leftRight}>\n                    <div className={classes.leftSide}>\n                        <img src={serverAddress + manga.thumbnailUrl} alt=\"Manga Thumbnail\" />\n                    </div>\n                    <div className={classes.rightSide}>\n                        <h1>\n                            {manga.title}\n                        </h1>\n                        <h3>\n                            Author:\n                            {' '}\n                            <span>{getValueOrUnknown(manga.author)}</span>\n                        </h3>\n                        <h3>\n                            Artist:\n                            {' '}\n                            <span>{getValueOrUnknown(manga.artist)}</span>\n                        </h3>\n                        <h3>\n                            Status:\n                            {' '}\n                            {manga.status}\n                        </h3>\n                        <h3>\n                            Source:\n                            {' '}\n                            {getSourceName(manga.source)}\n                        </h3>\n                    </div>\n                </div>\n                <div className={classes.buttons}>\n                    <div>\n                        <IconButton onClick={() => handleButtonClick()}>\n                            {inLibrary === 'In Library' && <FavoriteIcon />}\n                            {inLibrary !== 'In Library' && <FavoriteBorderIcon />}\n                            <span>{inLibrary}</span>\n                        </IconButton>\n                    </div>\n                    { /* eslint-disable-next-line react/jsx-no-target-blank */ }\n                    <a href={manga.url} target=\"_blank\">\n                        <IconButton>\n                            <PublicIcon />\n                            <span>Open Site</span>\n                        </IconButton>\n                    </a>\n                </div>\n            </div>\n            <div className={classes.bottom}>\n                <div className={classes.description}>\n                    <h4>About</h4>\n                    <p>{manga.description}</p>\n                </div>\n                <div className={classes.genre}>\n                    {manga.genre.split(', ').map((g) => <h5 key={g}>{g}</h5>)}\n                </div>\n            </div>\n        </div>\n    );\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/* eslint-disable react/jsx-props-no-spreading */\n/* eslint-disable react/require-default-props */\n/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst useStyles = makeStyles({\n    loading: {\n        margin: '10px auto',\n        display: 'flex',\n        justifyContent: 'center',\n    },\n});\n\ninterface IProps {\n    shouldRender: boolean | (() => boolean)\n    children?: React.ReactNode\n    component?: string | React.FunctionComponent<any> | React.ComponentClass<any, any>\n    componentProps?: any\n}\n\nexport default function LoadingPlaceholder(props: IProps) {\n    const {\n        children, shouldRender, component, componentProps,\n    } = props;\n    const classes = useStyles();\n\n    const condition = shouldRender instanceof Function ? shouldRender() : shouldRender;\n\n    if (condition) {\n        if (component) {\n            return React.createElement(component, componentProps);\n        }\n\n        if (children) {\n            return (\n                <>\n                    {children}\n                </>\n            );\n        }\n    }\n\n    return (\n        <div className={classes.loading}>\n            <CircularProgress thickness={5} />\n        </div>\n    );\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport { makeStyles, Theme } from '@material-ui/core/styles';\nimport { useParams } from 'react-router-dom';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport ChapterCard from '../components/ChapterCard';\nimport MangaDetails from '../components/MangaDetails';\nimport NavbarContext from '../context/NavbarContext';\nimport client from '../util/client';\nimport LoadingPlaceholder from '../components/LoadingPlaceholder';\n\nconst useStyles = makeStyles((theme: Theme) => ({\n    root: {\n        [theme.breakpoints.up('md')]: {\n            display: 'flex',\n        },\n    },\n\n    chapters: {\n        listStyle: 'none',\n        padding: 0,\n        [theme.breakpoints.up('md')]: {\n            width: '50vw',\n            height: 'calc(100vh - 64px)',\n            overflowY: 'auto',\n            margin: 0,\n        },\n    },\n\n    loading: {\n        margin: '10px 0',\n        display: 'flex',\n        justifyContent: 'center',\n    },\n}));\n\nexport default function Manga() {\n    const classes = useStyles();\n\n    const { setTitle } = useContext(NavbarContext);\n    useEffect(() => { setTitle('Manga'); }, []); // delegate setting topbar action to MangaDetails\n\n    const { id } = useParams<{id: string}>();\n\n    const [manga, setManga] = useState<IManga>();\n    const [chapters, setChapters] = useState<IChapter[]>([]);\n\n    useEffect(() => {\n        client.get(`/api/v1/manga/${id}/`)\n            .then((response) => response.data)\n            .then((data: IManga) => {\n                setManga(data);\n                setTitle(data.title);\n            });\n    }, []);\n\n    useEffect(() => {\n        client.get(`/api/v1/manga/${id}/chapters`)\n            .then((response) => response.data)\n            .then((data) => setChapters(data));\n    }, []);\n\n    const chapterCards = (\n        <LoadingPlaceholder\n            shouldRender={chapters.length > 0}\n        >\n            <ol className={classes.chapters}>\n                {chapters.map((chapter) => (<ChapterCard chapter={chapter} />))}\n            </ol>\n        </LoadingPlaceholder>\n\n    );\n\n    return (\n        <div className={classes.root}>\n            <LoadingPlaceholder\n                shouldRender={manga !== undefined}\n                component={MangaDetails}\n                componentProps={{ manga }}\n            />\n            {chapterCards}\n        </div>\n    );\n}\n","/* eslint-disable react/no-unused-prop-types */\n/* eslint-disable @typescript-eslint/no-unused-vars */\n/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useEffect, useRef, useState } from 'react';\nimport LazyLoad from 'react-lazyload';\nimport { IReaderSettings } from './ReaderNavBar';\n\nconst useStyles = (settings: IReaderSettings) => makeStyles({\n    loading: {\n        margin: '100px auto',\n        height: '100vh',\n    },\n    loadingImage: {\n        padding: settings.staticNav ? 'calc(50vh - 40px) calc(50vw - 340px)' : 'calc(50vh - 40px) calc(50vw - 40px)',\n        height: '100vh',\n        width: '200px',\n        backgroundColor: '#525252',\n        marginBottom: 10,\n    },\n    image: {\n        display: 'block',\n        marginBottom: settings.continuesPageGap ? '15px' : 0,\n    },\n});\n\ninterface IProps {\n    src: string\n    index: number\n    setCurPage: React.Dispatch<React.SetStateAction<number>>\n    settings: IReaderSettings\n}\n\nfunction LazyImage(props: IProps) {\n    const {\n        src, index, setCurPage, settings,\n    } = props;\n\n    const classes = useStyles(settings)();\n    const [imageSrc, setImagsrc] = useState<string>('');\n    const ref = useRef<HTMLImageElement>(null);\n\n    const handleScroll = () => {\n        if (ref.current) {\n            const rect = ref.current.getBoundingClientRect();\n            if (rect.y < 0 && rect.y + rect.height > 0) {\n                setCurPage(index);\n            }\n        }\n    };\n\n    useEffect(() => {\n        window.addEventListener('scroll', handleScroll);\n\n        return () => {\n            window.removeEventListener('scroll', handleScroll);\n        };\n    }, [handleScroll]);\n\n    useEffect(() => {\n        const img = new Image();\n        img.src = src;\n\n        img.onload = () => setImagsrc(src);\n    }, [src]);\n\n    if (imageSrc.length === 0) {\n        return (\n            <div className={classes.loadingImage}>\n                <CircularProgress thickness={5} />\n            </div>\n        );\n    }\n\n    return (\n        <img\n            className={classes.image}\n            ref={ref}\n            src={imageSrc}\n            alt={`Page #${index}`}\n            style={{ width: '100%' }}\n        />\n    );\n}\n\nexport default function Page(props: IProps) {\n    const {\n        src, index, setCurPage, settings,\n    } = props;\n    const classes = useStyles(settings)();\n\n    return (\n        <div style={{ margin: '0 auto' }}>\n            <LazyLoad\n                offset={window.innerHeight}\n                placeholder={(\n                    <div className={classes.loading}>\n                        <CircularProgress thickness={5} />\n                    </div>\n                )}\n                once\n            >\n                <LazyImage\n                    src={src}\n                    index={index}\n                    setCurPage={setCurPage}\n                    settings={settings}\n                />\n            </LazyLoad>\n        </div>\n    );\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport KeyboardArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRightIcon from '@material-ui/icons/KeyboardArrowRight';\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown';\nimport KeyboardArrowUpIcon from '@material-ui/icons/KeyboardArrowUp';\nimport { makeStyles, Theme, useTheme } from '@material-ui/core/styles';\nimport React, { useContext, useEffect, useState } from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { useHistory, Link } from 'react-router-dom';\nimport Slide from '@material-ui/core/Slide';\nimport Fade from '@material-ui/core/Fade';\nimport Zoom from '@material-ui/core/Zoom';\nimport { Switch } from '@material-ui/core';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport Collapse from '@material-ui/core/Collapse';\nimport Button from '@material-ui/core/Button';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport DarkTheme from '../context/DarkTheme';\nimport NavBarContext from '../context/NavbarContext';\n\nconst useStyles = (settings: IReaderSettings) => makeStyles((theme: Theme) => ({\n    // main container and root div need to change classes...\n    AppMainContainer: {\n        display: 'none',\n    },\n    AppRootElment: {\n        display: 'flex',\n    },\n\n    root: {\n        position: settings.staticNav ? 'sticky' : 'fixed',\n        top: 0,\n        left: 0,\n        minWidth: '300px',\n        height: '100vh',\n        overflowY: 'auto',\n        backgroundColor: '#0a0b0b',\n\n        '& header': {\n            backgroundColor: '#363b3d',\n            display: 'flex',\n            alignItems: 'center',\n            minHeight: '64px',\n            paddingLeft: '24px',\n            paddingRight: '24px',\n\n            transition: 'left 2s ease',\n\n            '& button': {\n                flexGrow: 0,\n                flexShrink: 0,\n            },\n\n            '& button:nth-child(1)': {\n                marginRight: '16px',\n            },\n\n            '& button:nth-child(3)': {\n                marginRight: '-12px',\n            },\n\n            '& h1': {\n                fontSize: '1.25rem',\n                flexGrow: 1,\n            },\n        },\n        '& hr': {\n            margin: '0 16px',\n            height: '1px',\n            border: '0',\n            backgroundColor: 'rgb(38, 41, 43)',\n        },\n    },\n\n    navigation: {\n        margin: '0 16px',\n\n        '& > span:nth-child(1)': {\n            textAlign: 'center',\n            display: 'block',\n            marginTop: '16px',\n        },\n\n        '& $navigationChapters': {\n            display: 'grid',\n            gridTemplateColumns: '1fr 1fr',\n            gridTemplateAreas: '\"prev next\"',\n            gridColumnGap: '5px',\n            margin: '10px 0',\n\n            '& a': {\n                flexGrow: 1,\n                textDecoration: 'none',\n\n                '& button': {\n                    width: '100%',\n                    padding: '5px 8px',\n                    textTransform: 'none',\n                },\n            },\n        },\n\n    },\n    navigationChapters: {}, // dummy rule\n\n    settingsCollapsseHeader: {\n        '& span': {\n            fontWeight: 'bold',\n        },\n    },\n\n    openDrawerButton: {\n        position: 'fixed',\n        top: 0 + 20,\n        left: 10 + 20,\n        height: '40px',\n        width: '40px',\n        borderRadius: 5,\n        backgroundColor: 'black',\n\n        '&:hover': {\n            backgroundColor: 'black',\n        },\n    },\n}));\n\nexport interface IReaderSettings{\n    staticNav: boolean\n    showPageNumber: boolean\n    continuesPageGap: boolean\n}\n\nexport const defaultReaderSettings = () => ({\n    staticNav: false,\n    showPageNumber: true,\n    continuesPageGap: false,\n} as IReaderSettings);\n\ninterface IProps {\n    settings: IReaderSettings\n    setSettings: React.Dispatch<React.SetStateAction<IReaderSettings>>\n    manga: IManga | IMangaCard\n    chapter: IChapter | IPartialChpter\n    curPage: number\n}\n\nexport default function ReaderNavBar(props: IProps) {\n    const { title } = useContext(NavBarContext);\n    const { darkTheme } = useContext(DarkTheme);\n\n    const history = useHistory();\n\n    const {\n        settings, setSettings, manga, chapter, curPage,\n    } = props;\n\n    const [drawerOpen, setDrawerOpen] = useState(false || settings.staticNav);\n    const [drawerVisible, setDrawerVisible] = useState(false || settings.staticNav);\n    const [hideOpenButton, setHideOpenButton] = useState(false);\n    const [prevScrollPos, setPrevScrollPos] = useState(0);\n    const [settingsCollapseOpen, setSettingsCollapseOpen] = useState(false);\n\n    const theme = useTheme();\n    const classes = useStyles(settings)();\n\n    const setSettingValue = (key: string, value: any) => setSettings({ ...settings, [key]: value });\n\n    const handleScroll = () => {\n        const currentScrollPos = window.pageYOffset;\n\n        if (Math.abs(currentScrollPos - prevScrollPos) > 20) {\n            setHideOpenButton(currentScrollPos > prevScrollPos);\n            setPrevScrollPos(currentScrollPos);\n        }\n    };\n\n    useEffect(() => {\n        window.addEventListener('scroll', handleScroll);\n\n        const rootEl = document.querySelector('#root')!;\n        const mainContainer = document.querySelector('#appMainContainer')!;\n\n        rootEl.classList.add(classes.AppRootElment);\n        mainContainer.classList.add(classes.AppMainContainer);\n\n        return () => {\n            rootEl.classList.remove(classes.AppRootElment);\n            mainContainer.classList.remove(classes.AppMainContainer);\n            window.removeEventListener('scroll', handleScroll);\n        };\n    }, [handleScroll]);// handleScroll changes on every render\n\n    return (\n        <>\n            <ClickAwayListener onClickAway={() => (drawerVisible && setDrawerOpen(false))}>\n                <Slide\n                    direction=\"right\"\n                    in={drawerOpen}\n                    timeout={200}\n                    appear={false}\n                    mountOnEnter\n                    unmountOnExit\n                    onEntered={() => setDrawerVisible(true)}\n                    onExited={() => setDrawerVisible(false)}\n                >\n                    <div className={classes.root}>\n                        <header>\n                            <IconButton\n                                edge=\"start\"\n                                color=\"inherit\"\n                                aria-label=\"menu\"\n                                disableRipple\n                                onClick={() => history.push(`/manga/${manga.id}`)}\n                            >\n                                <CloseIcon />\n                            </IconButton>\n                            <Typography variant=\"h1\">\n                                {title}\n                            </Typography>\n                            {!settings.staticNav\n                        && (\n                            <IconButton\n                                edge=\"start\"\n                                color=\"inherit\"\n                                aria-label=\"menu\"\n                                disableRipple\n                                onClick={() => setDrawerOpen(false)}\n                            >\n                                <KeyboardArrowLeftIcon />\n                            </IconButton>\n                        ) }\n                        </header>\n                        <ListItem ContainerComponent=\"div\" className={classes.settingsCollapsseHeader}>\n                            <ListItemText primary=\"Reader Settings\" />\n                            <ListItemSecondaryAction>\n                                <IconButton\n                                    edge=\"start\"\n                                    color=\"inherit\"\n                                    aria-label=\"menu\"\n                                    disableRipple\n                                    disableFocusRipple\n                                    onClick={() => setSettingsCollapseOpen(!settingsCollapseOpen)}\n                                >\n                                    {settingsCollapseOpen && <KeyboardArrowUpIcon />}\n                                    {!settingsCollapseOpen && <KeyboardArrowDownIcon />}\n                                </IconButton>\n                            </ListItemSecondaryAction>\n                        </ListItem>\n                        <Collapse in={settingsCollapseOpen} timeout=\"auto\" unmountOnExit>\n                            <List>\n                                <ListItem>\n                                    <ListItemText primary=\"Static Navigation\" />\n                                    <ListItemSecondaryAction>\n                                        <Switch\n                                            edge=\"end\"\n                                            checked={settings.staticNav}\n                                            onChange={(e) => setSettingValue('staticNav', e.target.checked)}\n                                        />\n                                    </ListItemSecondaryAction>\n                                </ListItem>\n                                <ListItem>\n                                    <ListItemText primary=\"Show page number\" />\n                                    <ListItemSecondaryAction>\n                                        <Switch\n                                            edge=\"end\"\n                                            checked={settings.showPageNumber}\n                                            onChange={(e) => setSettingValue('showPageNumber', e.target.checked)}\n                                        />\n                                    </ListItemSecondaryAction>\n                                </ListItem>\n                                <ListItem>\n                                    <ListItemText primary=\"Continues Page gap\" />\n                                    <ListItemSecondaryAction>\n                                        <Switch\n                                            edge=\"end\"\n                                            checked={settings.continuesPageGap}\n                                            onChange={(e) => setSettingValue('continuesPageGap', e.target.checked)}\n                                        />\n                                    </ListItemSecondaryAction>\n                                </ListItem>\n                            </List>\n                        </Collapse>\n                        <hr />\n                        <div className={classes.navigation}>\n                            <span>\n                                Currently on page\n                                {' '}\n                                {curPage + 1}\n                                {' '}\n                                of\n                                {' '}\n                                {chapter.pageCount}\n                            </span>\n                            <div className={classes.navigationChapters}>\n                                {chapter.chapterIndex > 1\n                            && (\n                                <Link\n                                    style={{ gridArea: 'prev' }}\n                                    to={`/manga/${manga.id}/chapter/${chapter.chapterIndex - 1}`}\n                                >\n                                    <Button\n                                        variant=\"outlined\"\n                                        startIcon={<KeyboardArrowLeftIcon />}\n                                    >\n                                        Chapter\n                                        {' '}\n                                        {chapter.chapterIndex - 1}\n                                    </Button>\n                                </Link>\n                            )}\n                                {chapter.chapterIndex < chapter.chapterCount\n                            && (\n                                <Link\n                                    style={{ gridArea: 'next' }}\n                                    to={`/manga/${manga.id}/chapter/${chapter.chapterIndex + 1}`}\n                                >\n                                    <Button\n                                        variant=\"outlined\"\n                                        endIcon={<KeyboardArrowRightIcon />}\n                                    >\n                                        Chapter\n                                        {' '}\n                                        {chapter.chapterIndex + 1}\n                                    </Button>\n                                </Link>\n                            )}\n                            </div>\n                        </div>\n                    </div>\n                </Slide>\n            </ClickAwayListener>\n            <Zoom in={!drawerOpen}>\n                <Fade in={!hideOpenButton}>\n                    <IconButton\n                        className={classes.openDrawerButton}\n                        edge=\"start\"\n                        color=\"inherit\"\n                        aria-label=\"menu\"\n                        disableRipple\n                        disableFocusRipple\n                        onClick={() => setDrawerOpen(true)}\n                    >\n                        <KeyboardArrowRightIcon />\n                    </IconButton>\n                </Fade>\n            </Zoom>\n        </>\n    );\n}\n","/* eslint-disable @typescript-eslint/no-unused-vars */\n/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { makeStyles } from '@material-ui/core/styles';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport Page from '../components/Page';\nimport ReaderNavBar, { defaultReaderSettings, IReaderSettings } from '../components/ReaderNavBar';\nimport NavbarContext from '../context/NavbarContext';\nimport client from '../util/client';\nimport useLocalStorage from '../util/useLocalStorage';\n\nconst useStyles = (settings: IReaderSettings) => makeStyles({\n    reader: {\n        display: 'flex',\n        flexDirection: 'column',\n        justifyContent: 'center',\n        margin: '0 auto',\n    },\n\n    loading: {\n        margin: '50px auto',\n    },\n\n    pageNumber: {\n        display: settings.showPageNumber ? 'block' : 'none',\n        position: 'fixed',\n        bottom: '50px',\n        right: settings.staticNav ? 'calc((100vw - 325px)/2)' : 'calc((100vw - 25px)/2)',\n        width: '50px',\n        textAlign: 'center',\n        backgroundColor: 'rgba(0, 0, 0, 0.3)',\n        borderRadius: '10px',\n    },\n});\n\nconst range = (n:number) => Array.from({ length: n }, (value, key) => key);\nconst initialChapter = () => ({ pageCount: -1, chapterIndex: -1, chapterCount: 0 });\n\nexport default function Reader() {\n    const [settings, setSettings] = useLocalStorage<IReaderSettings>('readerSettings', defaultReaderSettings);\n\n    const classes = useStyles(settings)();\n\n    const [serverAddress] = useLocalStorage<String>('serverBaseURL', '');\n\n    const { chapterIndex, mangaId } = useParams<{chapterIndex: string, mangaId: string}>();\n    const [manga, setManga] = useState<IMangaCard | IManga>({ id: +mangaId, title: '', thumbnailUrl: '' });\n    const [chapter, setChapter] = useState<IChapter | IPartialChpter>(initialChapter());\n    const [curPage, setCurPage] = useState<number>(0);\n\n    const { setOverride, setTitle } = useContext(NavbarContext);\n    useEffect(() => {\n        setOverride(\n            {\n                status: true,\n                value: (\n                    <ReaderNavBar\n                        settings={settings}\n                        setSettings={setSettings}\n                        manga={manga}\n                        chapter={chapter}\n                        curPage={curPage}\n                    />\n                ),\n            },\n        );\n\n        // clean up for when we leave the reader\n        return () => setOverride({ status: false, value: <div /> });\n    }, [manga, chapter, settings, curPage, chapterIndex]);\n\n    useEffect(() => {\n        setTitle('Reader');\n        client.get(`/api/v1/manga/${mangaId}/`)\n            .then((response) => response.data)\n            .then((data: IManga) => {\n                setManga(data);\n                setTitle(data.title);\n            });\n    }, [chapterIndex]);\n\n    useEffect(() => {\n        setChapter(initialChapter);\n        client.get(`/api/v1/manga/${mangaId}/chapter/${chapterIndex}`)\n            .then((response) => response.data)\n            .then((data:IChapter) => {\n                setChapter(data);\n            });\n    }, [chapterIndex]);\n\n    if (chapter.pageCount === -1) {\n        return (\n            <div className={classes.loading}>\n                <CircularProgress thickness={5} />\n            </div>\n        );\n    }\n    return (\n        <div className={classes.reader}>\n            <div className={classes.pageNumber}>\n                {`${curPage + 1} / ${chapter.pageCount}`}\n            </div>\n            {range(chapter.pageCount).map((index) => (\n                <Page\n                    key={index}\n                    index={index}\n                    src={`${serverAddress}/api/v1/manga/${mangaId}/chapter/${chapterIndex}/page/${index}`}\n                    setCurPage={setCurPage}\n                    settings={settings}\n                />\n            ))}\n        </div>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\nimport Button from '@material-ui/core/Button';\nimport { useParams } from 'react-router-dom';\nimport MangaGrid from '../components/MangaGrid';\nimport NavbarContext from '../context/NavbarContext';\nimport client from '../util/client';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        TextField: {\n            margin: theme.spacing(1),\n            width: '25ch',\n        },\n    },\n}));\n\nexport default function SearchSingle() {\n    const { setTitle, setAction } = useContext(NavbarContext);\n    useEffect(() => { setTitle('Search'); setAction(<></>); }, []);\n\n    const { sourceId } = useParams<{sourceId: string}>();\n    const classes = useStyles();\n    const [error, setError] = useState<boolean>(false);\n    const [mangas, setMangas] = useState<IMangaCard[]>([]);\n    const [message, setMessage] = useState<string>('');\n    const [searchTerm, setSearchTerm] = useState<string>('');\n    const [hasNextPage, setHasNextPage] = useState<boolean>(false);\n    const [lastPageNum, setLastPageNum] = useState<number>(1);\n\n    const textInput = React.createRef<HTMLInputElement>();\n\n    useEffect(() => {\n        client.get(`/api/v1/source/${sourceId}`)\n            .then((response) => response.data)\n            .then((data: { name: string }) => setTitle(`Search: ${data.name}`));\n    }, []);\n\n    function processInput() {\n        if (textInput.current) {\n            const { value } = textInput.current;\n            if (value === '') {\n                setError(true);\n                setMessage('Type something to search');\n            } else {\n                setError(false);\n                setSearchTerm(value);\n                setMangas([]);\n                setMessage('loading...');\n            }\n        }\n    }\n\n    useEffect(() => {\n        if (searchTerm.length > 0) {\n            client.get(`/api/v1/source/${sourceId}/search/${searchTerm}/${lastPageNum}`)\n                .then((response) => response.data)\n                .then((data: { mangaList: IManga[], hasNextPage: boolean }) => {\n                    setMessage('');\n                    if (data.mangaList.length > 0) {\n                        setMangas([\n                            ...mangas,\n                            ...data.mangaList.map((it) => ({\n                                title: it.title, thumbnailUrl: it.thumbnailUrl, id: it.id,\n                            }))]);\n                        setHasNextPage(data.hasNextPage);\n                    } else {\n                        setMessage('search qeury returned nothing.');\n                    }\n                });\n        }\n    }, [searchTerm]);\n\n    const mangaGrid = (\n        <MangaGrid\n            mangas={mangas}\n            message={message}\n            hasNextPage={hasNextPage}\n            lastPageNum={lastPageNum}\n            setLastPageNum={setLastPageNum}\n        />\n    );\n\n    return (\n        <>\n            <div className={classes.root}>\n                <TextField\n                    inputRef={textInput}\n                    error={error}\n                    id=\"standard-basic\"\n                    label=\"Search text..\"\n                    onKeyDown={(e) => e.key === 'Enter' && processInput()}\n                />\n                <Button variant=\"contained\" color=\"primary\" onClick={() => processInput()}>\n                    Search\n                </Button>\n            </div>\n            {mangaGrid}\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport { Tab, Tabs } from '@material-ui/core';\nimport React, { useContext, useEffect, useState } from 'react';\nimport MangaGrid from '../components/MangaGrid';\nimport NavbarContext from '../context/NavbarContext';\nimport client from '../util/client';\n\ninterface IMangaCategory {\n    category: ICategory\n    mangas: IManga[]\n    isFetched: boolean\n}\n\ninterface TabPanelProps {\n    children: React.ReactNode;\n    index: any;\n    value: any;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n    const {\n        children, value, index,\n    } = props;\n\n    return (\n        <div\n            role=\"tabpanel\"\n            hidden={value !== index}\n            id={`simple-tabpanel-${index}`}\n        >\n            {value === index && children}\n        </div>\n    );\n}\n\nexport default function Library() {\n    const { setTitle, setAction } = useContext(NavbarContext);\n    useEffect(() => { setTitle('Library'); setAction(<></>); }, []);\n\n    const [tabs, setTabs] = useState<IMangaCategory[]>([]);\n    const [tabNum, setTabNum] = useState<number>(0);\n\n    // a hack so MangaGrid doesn't stop working. I won't change it in case\n    // if I do manga pagination for library..\n    const [lastPageNum, setLastPageNum] = useState<number>(1);\n\n    const handleTabChange = (newTab: number) => {\n        setTabNum(newTab);\n    };\n\n    useEffect(() => {\n        Promise.all<IManga[], ICategory[]>([\n            client.get('/api/v1/library').then((response) => response.data),\n            client.get('/api/v1/category').then((response) => response.data),\n        ])\n            .then(\n                ([libraryMangas, categories]) => {\n                    const categoryTabs = categories.map((category) => ({\n                        category,\n                        mangas: [] as IManga[],\n                        isFetched: false,\n                    }));\n\n                    if (libraryMangas.length > 0 || categoryTabs.length === 0) {\n                        const defaultCategoryTab = {\n                            category: {\n                                name: 'Default',\n                                isLanding: true,\n                                order: 0,\n                                id: -1,\n                            },\n                            mangas: libraryMangas,\n                            isFetched: true,\n                        };\n                        setTabs(\n                            [defaultCategoryTab, ...categoryTabs],\n                        );\n                    } else {\n                        setTabs(categoryTabs);\n                        setTabNum(1);\n                    }\n                },\n            );\n    }, []);\n\n    // console.log(client.defaults.baseURL);\n    // fetch the current tab\n    useEffect(() => {\n        tabs.forEach((tab, index) => {\n            if (tab.category.order === tabNum && !tab.isFetched) {\n                // eslint-disable-next-line @typescript-eslint/no-shadow\n                client.get(`/api/v1/category/${tab.category.id}`)\n                    .then((response) => response.data)\n                    .then((data: IManga[]) => {\n                        const tabsClone = JSON.parse(JSON.stringify(tabs));\n                        tabsClone[index].mangas = data;\n                        tabsClone[index].isFetched = true;\n\n                        setTabs(tabsClone); // clone the object\n                    });\n            }\n        });\n    }, [tabNum]);\n\n    let toRender;\n    if (tabs.length > 1) {\n        // eslint-disable-next-line max-len\n        const tabDefines = tabs.map((tab) => (<Tab label={tab.category.name} value={tab.category.order} />));\n\n        const tabBodies = tabs.map((tab) => (\n            <TabPanel value={tabNum} index={tab.category.order}>\n                <MangaGrid\n                    mangas={tab.mangas}\n                    hasNextPage={false}\n                    lastPageNum={lastPageNum}\n                    setLastPageNum={setLastPageNum}\n                    message={tab.isFetched ? 'Category is Empty' : 'Loading...'}\n                />\n            </TabPanel>\n        ));\n\n        // Visual Hack: 160px is min-width for viewport width of >600\n        const scrollableTabs = window.innerWidth < tabs.length * 160;\n        toRender = (\n            <>\n                <Tabs\n                    value={tabNum}\n                    onChange={(e, newTab) => handleTabChange(newTab)}\n                    indicatorColor=\"primary\"\n                    textColor=\"primary\"\n                    centered={!scrollableTabs}\n                    variant={scrollableTabs ? 'scrollable' : 'fullWidth'}\n                    scrollButtons=\"on\"\n                >\n                    {tabDefines}\n                </Tabs>\n                {tabBodies}\n            </>\n        );\n    } else {\n        const mangas = tabs.length === 1 ? tabs[0].mangas : [];\n        toRender = (\n            <MangaGrid\n                mangas={mangas}\n                hasNextPage={false}\n                lastPageNum={lastPageNum}\n                setLastPageNum={setLastPageNum}\n                message={tabs.length > 0 ? 'Library is Empty' : undefined}\n            />\n        );\n    }\n\n    return toRender;\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport List from '@material-ui/core/List';\nimport InboxIcon from '@material-ui/icons/Inbox';\nimport Brightness6Icon from '@material-ui/icons/Brightness6';\nimport DnsIcon from '@material-ui/icons/Dns';\nimport EditIcon from '@material-ui/icons/Edit';\nimport {\n    Button, Dialog, DialogActions, DialogContent,\n    DialogContentText, IconButton, ListItemSecondaryAction, Switch, TextField,\n    ListItemIcon, ListItemText,\n} from '@material-ui/core';\nimport ListItem, { ListItemProps } from '@material-ui/core/ListItem';\nimport NavbarContext from '../context/NavbarContext';\nimport DarkTheme from '../context/DarkTheme';\nimport useLocalStorage from '../util/useLocalStorage';\n\nfunction ListItemLink(props: ListItemProps<'a', { button?: true }>) {\n    // eslint-disable-next-line react/jsx-props-no-spreading\n    return <ListItem button component=\"a\" {...props} />;\n}\n\nexport default function Settings() {\n    const { setTitle, setAction } = useContext(NavbarContext);\n    useEffect(() => { setTitle('Settings'); setAction(<></>); }, []);\n\n    const { darkTheme, setDarkTheme } = useContext(DarkTheme);\n    const [serverAddress, setServerAddress] = useLocalStorage<String>('serverBaseURL', '');\n    const [dialogOpen, setDialogOpen] = useState(false);\n    const [dialogValue, setDialogValue] = useState(serverAddress);\n\n    const handleDialogOpen = () => {\n        setDialogValue(serverAddress);\n        setDialogOpen(true);\n    };\n\n    const handleDialogCancel = () => {\n        setDialogOpen(false);\n    };\n\n    const handleDialogSubmit = () => {\n        setDialogOpen(false);\n        setServerAddress(dialogValue);\n    };\n\n    return (\n        <>\n            <List style={{ padding: 0 }}>\n                <ListItemLink href=\"/settings/categories\">\n                    <ListItemIcon>\n                        <InboxIcon />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Categories\" />\n                </ListItemLink>\n                <ListItem>\n                    <ListItemIcon>\n                        <Brightness6Icon />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Dark Theme\" />\n                    <ListItemSecondaryAction>\n                        <Switch\n                            edge=\"end\"\n                            checked={darkTheme}\n                            onChange={() => setDarkTheme(!darkTheme)}\n                        />\n                    </ListItemSecondaryAction>\n                </ListItem>\n                <ListItem>\n                    <ListItemIcon>\n                        <DnsIcon />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Server Address\" secondary={serverAddress} />\n                    <ListItemSecondaryAction>\n                        <IconButton\n                            onClick={() => {\n                                handleDialogOpen();\n                            }}\n                        >\n                            <EditIcon />\n                        </IconButton>\n\n                    </ListItemSecondaryAction>\n                </ListItem>\n            </List>\n\n            <Dialog open={dialogOpen} onClose={handleDialogCancel}>\n                <DialogContent>\n                    <DialogContentText>\n                        Enter new category name.\n                    </DialogContentText>\n                    <TextField\n                        autoFocus\n                        margin=\"dense\"\n                        id=\"name\"\n                        label=\"Category Name\"\n                        type=\"text\"\n                        fullWidth\n                        value={dialogValue}\n                        onChange={(e) => setDialogValue(e.target.value)}\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleDialogCancel} color=\"primary\">\n                        Cancel\n                    </Button>\n                    <Button onClick={handleDialogSubmit} color=\"primary\">\n                        Set\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\n/* eslint-disable @typescript-eslint/no-shadow */\n/* eslint-disable react/destructuring-assignment */\n/* eslint-disable react/jsx-props-no-spreading */\nimport React, { useState, useContext, useEffect } from 'react';\nimport {\n    List,\n    ListItem,\n    ListItemText,\n    ListItemIcon,\n    IconButton,\n} from '@material-ui/core';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport DragHandleIcon from '@material-ui/icons/DragHandle';\nimport EditIcon from '@material-ui/icons/Edit';\nimport { useTheme } from '@material-ui/core/styles';\nimport Fab from '@material-ui/core/Fab';\nimport AddIcon from '@material-ui/icons/Add';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport NavbarContext from '../../context/NavbarContext';\nimport client from '../../util/client';\n\nconst getItemStyle = (isDragging, draggableStyle, palette) => ({\n    // styles we need to apply on draggables\n    ...draggableStyle,\n\n    ...(isDragging && {\n        background: palette.type === 'dark' ? '#424242' : 'rgb(235,235,235)',\n    }),\n});\n\nexport default function Categories() {\n    const { setTitle, setAction } = useContext(NavbarContext);\n    useEffect(() => { setTitle('Categories'); setAction(<></>); }, []);\n\n    const [categories, setCategories] = useState([]);\n    const [categoryToEdit, setCategoryToEdit] = useState(-1); // -1 means new category\n    const [dialogOpen, setDialogOpen] = useState(false);\n    const [dialogValue, setDialogValue] = useState('');\n    const theme = useTheme();\n\n    const [updateTriggerHolder, setUpdateTriggerHolder] = useState(0); // just a hack\n    const triggerUpdate = () => setUpdateTriggerHolder(updateTriggerHolder + 1); // just a hack\n\n    useEffect(() => {\n        if (!dialogOpen) {\n            client.get('/api/v1/category/')\n                .then((response) => response.data)\n                .then((data) => setCategories(data));\n        }\n    }, [updateTriggerHolder]);\n\n    const categoryReorder = (list, from, to) => {\n        const category = list[from];\n\n        const formData = new FormData();\n        formData.append('from', from + 1);\n        formData.append('to', to + 1);\n        client.post(`/api/v1/category/${category.id}/reorder`, formData)\n            .finally(() => triggerUpdate());\n\n        // also move it in local state to avoid jarring moving behviour...\n        const result = Array.from(list);\n        const [removed] = result.splice(from, 1);\n        result.splice(to, 0, removed);\n        return result;\n    };\n\n    const onDragEnd = (result) => {\n        // dropped outside the list?\n        if (!result.destination) {\n            return;\n        }\n\n        setCategories(categoryReorder(\n            categories,\n            result.source.index,\n            result.destination.index,\n        ));\n    };\n\n    const resetDialog = () => {\n        setDialogValue('');\n        setCategoryToEdit(-1);\n    };\n\n    const handleDialogOpen = () => {\n        resetDialog();\n        setDialogOpen(true);\n    };\n\n    const handleDialogCancel = () => {\n        setDialogOpen(false);\n    };\n\n    const handleDialogSubmit = () => {\n        setDialogOpen(false);\n\n        const formData = new FormData();\n        formData.append('name', dialogValue);\n\n        if (categoryToEdit === -1) {\n            client.post('/api/v1/category/', formData)\n                .finally(() => triggerUpdate());\n        } else {\n            const category = categories[categoryToEdit];\n            client.patch(`/api/v1/category/${category.id}`, formData)\n                .finally(() => triggerUpdate());\n        }\n    };\n\n    const deleteCategory = (index) => {\n        const category = categories[index];\n        client.delete(`/api/v1/category/${category.id}`)\n            .finally(() => triggerUpdate());\n    };\n\n    return (\n        <>\n            <DragDropContext onDragEnd={onDragEnd}>\n                <Droppable droppableId=\"droppable\">\n                    {(provided) => (\n                        <List ref={provided.innerRef}>\n                            {categories.map((item, index) => (\n                                <Draggable\n                                    key={item.id}\n                                    draggableId={item.id.toString()}\n                                    index={index}\n                                >\n                                    {(provided, snapshot) => (\n                                        <ListItem\n                                            ContainerComponent=\"li\"\n                                            ContainerProps={{ ref: provided.innerRef }}\n                                            {...provided.draggableProps}\n                                            {...provided.dragHandleProps}\n                                            style={getItemStyle(\n                                                snapshot.isDragging,\n                                                provided.draggableProps.style,\n                                                theme.palette,\n                                            )}\n                                            ref={provided.innerRef}\n                                        >\n                                            <ListItemIcon>\n                                                <DragHandleIcon />\n                                            </ListItemIcon>\n                                            <ListItemText\n                                                primary={item.name}\n                                            />\n                                            <IconButton\n                                                onClick={() => {\n                                                    handleDialogOpen();\n                                                    setCategoryToEdit(index);\n                                                }}\n                                            >\n                                                <EditIcon />\n                                            </IconButton>\n                                            <IconButton\n                                                onClick={() => {\n                                                    deleteCategory(index);\n                                                }}\n                                            >\n                                                <DeleteIcon />\n                                            </IconButton>\n                                        </ListItem>\n                                    )}\n                                </Draggable>\n                            ))}\n                            {provided.placeholder}\n                        </List>\n                    )}\n                </Droppable>\n            </DragDropContext>\n            <Fab\n                color=\"primary\"\n                aria-label=\"add\"\n                style={{\n                    position: 'absolute',\n                    bottom: theme.spacing(2),\n                    right: theme.spacing(2),\n                }}\n                onClick={handleDialogOpen}\n            >\n                <AddIcon />\n            </Fab>\n            <Dialog open={dialogOpen} onClose={handleDialogCancel}>\n                <DialogTitle id=\"form-dialog-title\">\n                    {categoryToEdit === -1 ? 'New Catalog' : `Rename: ${categories[categoryToEdit].name}`}\n                </DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                        Enter new category name.\n                    </DialogContentText>\n                    <TextField\n                        autoFocus\n                        margin=\"dense\"\n                        id=\"name\"\n                        label=\"Category Name\"\n                        type=\"text\"\n                        fullWidth\n                        value={dialogValue}\n                        onChange={(e) => setDialogValue(e.target.value)}\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleDialogCancel} color=\"primary\">\n                        Cancel\n                    </Button>\n                    <Button onClick={handleDialogSubmit} color=\"primary\">\n                        Submit\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        </>\n\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React, { useState } from 'react';\nimport {\n    BrowserRouter as Router, Redirect, Route, Switch,\n} from 'react-router-dom';\nimport { Container } from '@material-ui/core';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\n\nimport NavBar from './components/NavBar';\nimport Sources from './screens/Sources';\nimport Extensions from './screens/Extensions';\nimport SourceMangas from './screens/SourceMangas';\nimport Manga from './screens/Manga';\nimport Reader from './screens/Reader';\nimport Search from './screens/SearchSingle';\nimport NavbarContext from './context/NavbarContext';\nimport DarkTheme from './context/DarkTheme';\nimport Library from './screens/Library';\nimport Settings from './screens/Settings';\nimport Categories from './screens/settings/Categories';\nimport useLocalStorage from './util/useLocalStorage';\n\nexport default function App() {\n    const [title, setTitle] = useState<string>('Tachidesk');\n    const [action, setAction] = useState<any>(<div />);\n    const [override, setOverride] = useState<INavbarOverride>({ status: false, value: <div /> });\n\n    const [darkTheme, setDarkTheme] = useLocalStorage<boolean>('darkTheme', true);\n\n    const navBarContext = {\n        title, setTitle, action, setAction, override, setOverride,\n    };\n    const darkThemeContext = { darkTheme, setDarkTheme };\n\n    const theme = React.useMemo(\n        () => createMuiTheme({\n            palette: {\n                type: darkTheme ? 'dark' : 'light',\n            },\n            overrides: {\n                MuiCssBaseline: {\n                    '@global': {\n                        '*::-webkit-scrollbar': {\n                            width: '10px',\n                            background: darkTheme ? '#222' : '#e1e1e1',\n\n                        },\n                        '*::-webkit-scrollbar-thumb': {\n                            background: darkTheme ? '#111' : '#aaa',\n                            borderRadius: '5px',\n                        },\n                    },\n                },\n            },\n        }),\n        [darkTheme],\n    );\n\n    return (\n        <Router>\n            <ThemeProvider theme={theme}>\n                <NavbarContext.Provider value={navBarContext}>\n                    <CssBaseline />\n                    <NavBar />\n                    <Container\n                        id=\"appMainContainer\"\n                        maxWidth={false}\n                        disableGutters\n                        style={{ paddingTop: '64px' }}\n                    >\n                        <Switch>\n                            <Route path=\"/sources/:sourceId/search/\">\n                                <Search />\n                            </Route>\n                            <Route path=\"/extensions\">\n                                <Extensions />\n                            </Route>\n                            <Route path=\"/sources/:sourceId/popular/\">\n                                <SourceMangas popular />\n                            </Route>\n                            <Route path=\"/sources/:sourceId/latest/\">\n                                <SourceMangas popular={false} />\n                            </Route>\n                            <Route path=\"/sources\">\n                                <Sources />\n                            </Route>\n                            <Route path=\"/manga/:mangaId/chapter/:chapterNum\">\n                                <></>\n                            </Route>\n                            <Route path=\"/manga/:id\">\n                                <Manga />\n                            </Route>\n                            <Route path=\"/library\">\n                                <Library />\n                            </Route>\n                            <Route path=\"/settings/categories\">\n                                <Categories />\n                            </Route>\n                            <Route path=\"/settings\">\n                                <DarkTheme.Provider value={darkThemeContext}>\n                                    <Settings />\n                                </DarkTheme.Provider>\n                            </Route>\n                            <Route\n                                exact\n                                path=\"/\"\n                                render={() => (\n                                    <Redirect to=\"/library\" />\n                                )}\n                            />\n                        </Switch>\n                    </Container>\n                    <Switch>\n                        <Route path=\"/manga/:mangaId/chapter/:chapterIndex\">\n                            <Reader />\n                        </Route>\n                    </Switch>\n                </NavbarContext.Provider>\n            </ThemeProvider>\n        </Router>\n    );\n}\n","/*\n * Copyright (C) Contributors to the Suwayomi project\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at https://mozilla.org/MPL/2.0/. */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n// roboto font\nimport 'fontsource-roboto';\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById('root'),\n);\n"],"sourceRoot":""}